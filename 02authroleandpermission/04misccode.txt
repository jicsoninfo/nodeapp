 
 ‚úÖ STEP 1 ‚Äî ADD BUTTON
<button type="button" id="sendEmailCode" class="btn btn-danger period-add">
    {{ trans('frontendmsg.veh_reg_09_a07') }}
</button>

‚úÖ STEP 2 ‚Äî ADD POPUP MODAL (Bootstrap)
<div class="modal fade" id="emailCodeModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Enter Verification Code</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <input type="text" id="emailCodeInput" class="form-control" maxlength="6" placeholder="Enter 6-digit code">
        <small id="emailCodeError" class="text-danger d-none">Invalid code</small>
      </div>

      <div class="modal-footer">
        <button type="button" id="verifyEmailCode" class="btn btn-success">Verify</button>
      </div>

    </div>
  </div>
</div>

‚úÖ STEP 3 ‚Äî JAVASCRIPT FOR SENDING CODE
<script>
$("#sendEmailCode").click(function () {

    $.ajax({
        url: "{{ route('email.send.code') }}",
        type: "POST",
        data: { _token: "{{ csrf_token() }}" },
        success: function () {
            let modal = new bootstrap.Modal(document.getElementById('emailCodeModal'));
            modal.show();
        },
        error: function () {
            alert("Unable to send code. Try again.");
        }
    });

});
</script>

‚úÖ STEP 4 ‚Äî JAVASCRIPT FOR VERIFYING THE CODE
$("#verifyEmailCode").click(function () {

    $.ajax({
        url: "{{ route('email.verify.code') }}",
        type: "POST",
        data: {
            _token: "{{ csrf_token() }}",
            code: $("#emailCodeInput").val()
        },
        success: function (res) {
            if (res.verified) {
                location.reload();  // or go to next step without reload
            } else {
                $("#emailCodeError").removeClass('d-none');
            }
        }
    });

});
</script>

‚úÖ STEP 5 ‚Äî BACKEND CONTROLLERS
Route
Route::post('/email/send-code', [VerifyController::class, 'sendCode'])->name('email.send.code');
Route::post('/email/verify-code', [VerifyController::class, 'verifyCode'])->name('email.verify.code');

sendCode()
public function sendCode()
{
    $user = auth()->user();
    $code = rand(100000, 999999);

    // Store in DB or cache
    $user->email_verify_code = $code;
    $user->save();

    // Send email
    Mail::to($user->email)->send(new EmailVerificationCode($code));

    return response()->json(['status' => 'sent']);
}

verifyCode()
public function verifyCode(Request $request)
{
    $user = auth()->user();

    if ($user->email_verify_code == $request->code) {
        $user->email_verified_at = now();
        $user->email_verify_code = null;
        $user->save();

        return response()->json(['verified' => true]);
    }

    return response()->json(['verified' => false]);
}

üéâ RESULT

‚úî Email sends a 6 digit code
‚úî Popup opens
‚úî User enters code
‚úî AJAX verifies it
‚úî Email becomes verified instantly
‚úî No page redirect
‚úî All form registration data stays intact

If you want, I can also:

üîπ Style the modal beautifully
üîπ Add countdown timer for resend
üîπ Add auto-move to next step
üîπ Add ‚Äúauto detect code from email‚Äù (Gmail/IOS supports this)

Just tell me!

//============================================
Absolutely YES!
You can show 6 separate input boxes, just like mobile OTP screens.

‚û° One digit per box
‚û° Auto-move to next box
‚û° Auto-delete and move back
‚û° Paste full 6-digit code supported
‚û° Looks professional and modern

Below is a complete working code.

‚úÖ STEP 1 ‚Äî Replace input with 6 OTP boxes
<div class="modal-body text-center">

    <div id="otpInputs" class="d-flex justify-content-between gap-2">
        <input type="text" maxlength="1" class="otp-input form-control text-center" />
        <input type="text" maxlength="1" class="otp-input form-control text-center" />
        <input type="text" maxlength="1" class="otp-input form-control text-center" />
        <input type="text" maxlength="1" class="otp-input form-control text-center" />
        <input type="text" maxlength="1" class="otp-input form-control text-center" />
        <input type="text" maxlength="1" class="otp-input form-control text-center" />
    </div>

    <small id="emailCodeError" class="text-danger d-none">Invalid code</small>

</div>

üé® CSS for better styling
.otp-input {
    width: 45px;
    height: 50px;
    font-size: 22px;
    font-weight: bold;
}

‚úÖ STEP 2 ‚Äî JS: Auto-move, backspace, and paste support
<script>
document.querySelectorAll('.otp-input').forEach((input, index, inputs) => {

    // Only allow numbers
    input.addEventListener('input', function() {
        this.value = this.value.replace(/[^0-9]/g, "");

        if (this.value && index < inputs.length - 1) {
            inputs[index + 1].focus();
        }
    });

    // Move back on delete
    input.addEventListener('keydown', function(e) {
        if (e.key === "Backspace" && !this.value && index > 0) {
            inputs[index - 1].focus();
        }
    });

    // Paste full code
    input.addEventListener('paste', function(e) {
        e.preventDefault();
        let data = e.clipboardData.getData("text").replace(/\D/g, "");

        data.split("").forEach((num, i) => {
            if (i < inputs.length) inputs[i].value = num;
        });

        inputs[inputs.length - 1].focus();
    });
});
</script>

‚úÖ STEP 3 ‚Äî Submit the combined 6-digit code

Modify verify button code to read the 6 inputs:

$("#verifyEmailCode").click(function () {

    const code = [...document.querySelectorAll(".otp-input")]
        .map(i => i.value)
        .join("");

    $.ajax({
        url: "{{ route('email.verify.code') }}",
        type: "POST",
        data: {
            _token: "{{ csrf_token() }}",
            code: code
        },
        success: function (res) {
            if (res.verified) {
                location.reload();
            } else {
                $("#emailCodeError").removeClass('d-none');
            }
        }
    });

});

üéâ RESULT: Mobile-style OTP verification

‚úî 6-digit box inputs
‚úî Auto-focus next box
‚úî Backspace moves to previous
‚úî Paste ‚Äú123456‚Äù fills all boxes
‚úî AJAX verifies code
‚úî No page reload until verification success
‚úî Perfect for vehicle registration step pages

If you want, I can style it to match your Camper Booking website theme with colors, rounded boxes, spacing, animations, etc.


 //=================================================================
 <button type="button" id="sendEmailCode" class="btn btn-danger period-add">
                                                {{ trans('frontendmsg.veh_reg_09_a07') }}
                                            </button>

                                               <div class="modal fade" id="emailCodeModal" tabindex="-1">
            <style>
                .otp-input {
                        width: 45px;
                        height: 50px;
                        font-size: 22px;
                        font-weight: bold;
                    }
            </style>
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">

                    <div class="modal-header">
                        <h5 class="modal-title">Enter Verification Code</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>

                    <div class="modal-body">
                        <!-- <input type="text" id="emailCodeInput" class="form-control" maxlength="6" placeholder="Enter 6-digit code"> -->
                         <div id="otpInputs" class="d-flex justify-content-between gap-2">
                            <input type="text" maxlength="1" class="otp-input form-control text-center" />
                            <input type="text" maxlength="1" class="otp-input form-control text-center" />
                            <input type="text" maxlength="1" class="otp-input form-control text-center" />
                            <input type="text" maxlength="1" class="otp-input form-control text-center" />
                            <input type="text" maxlength="1" class="otp-input form-control text-center" />
                            <input type="text" maxlength="1" class="otp-input form-control text-center" />
                        </div>

                        <!-- <small id="emailCodeError" class="text-danger d-none">Invalid code</small> -->
                        <small id="emailCodeError" class="text-danger d-none">Invalid code</small>
                    </div>

                    <div class="modal-footer">
                        <button type="button" id="verifyEmailCode" class="btn btn-success">Verify</button>
                    </div>

                    </div>
                </div>
            </div>

            <script>
                    $("#sendEmailCode").click(function () {

                        $.ajax({
                            url: "{{ route('verification.resend') }}",
                            type: "POST",
                            data: { _token: "{{ csrf_token() }}" },
                            success: function () {
                                let modal = new bootstrap.Modal(document.getElementById('emailCodeModal'));
                                modal.show();
                            },
                            error: function () {
                                alert("Unable to send code. Try again.");
                            }
                        });

                    });
            </script>


<script>
document.querySelectorAll('.otp-input').forEach((input, index, inputs) => {

    // Only allow numbers
    input.addEventListener('input', function() {
        this.value = this.value.replace(/[^0-9]/g, "");

        if (this.value && index < inputs.length - 1) {
            inputs[index + 1].focus();
        }
    });

    // Move back on delete
    input.addEventListener('keydown', function(e) {
        if (e.key === "Backspace" && !this.value && index > 0) {
            inputs[index - 1].focus();
        }
    });

    // Paste full code
    input.addEventListener('paste', function(e) {
        e.preventDefault();
        let data = e.clipboardData.getData("text").replace(/\D/g, "");

        data.split("").forEach((num, i) => {
            if (i < inputs.length) inputs[i].value = num;
        });

        inputs[inputs.length - 1].focus();
    });
});



$("#verifyEmailCode").click(function () {

    const code = [...document.querySelectorAll(".otp-input")]
        .map(i => i.value)
        .join("");

    $.ajax({
        url: "{{-- route('email.verify.code') --}}",
        type: "POST",
        data: {
            _token: "{{ csrf_token() }}",
            code: code
        },
        success: function (res) {
            if (res.verified) {
                location.reload();
            } else {
                $("#emailCodeError").removeClass('d-none');
            }
        }
    });

});

</script>

<script>
// $("#sendEmailCode").click(function () {

//     $.ajax({
//         url: "{{-- route('email.send.code') --}}",
//         type: "POST",
//         data: { _token: "{{ csrf_token() }}" },
//         success: function () {
//             let modal = new bootstrap.Modal(document.getElementById('emailCodeModal'));
//             modal.show();
//         },
//         error: function () {
//             alert("Unable to send code. Try again.");
//         }
//     });

// });


// $("#verifyEmailCode").click(function () {

//     $.ajax({
//         url: "{{-- route('email.verify.code') --}}",
//         type: "POST",
//         data: {
//             _token: "{{ csrf_token() }}",
//             code: $("#emailCodeInput").val()
//         },
//         success: function (res) {
//             if (res.verified) {
//                 location.reload();  // or go to next step without reload
//             } else {
//                 $("#emailCodeError").removeClass('d-none');
//             }
//         }
//     });

// });
</script>

<!-- 
Route::post('/email/send-code', [VerifyController::class, 'sendCode'])->name('email.send.code');
Route::post('/email/verify-code', [VerifyController::class, 'verifyCode'])->name('email.verify.code');
public function sendCode()
{
    $user = auth()->user();
    $code = rand(100000, 999999);

    // Store in DB or cache
    $user->email_verify_code = $code;
    $user->save();

    // Send email
    Mail::to($user->email)->send(new EmailVerificationCode($code));

    return response()->json(['status' => 'sent']);
}


public function verifyCode(Request $request)
{
    $user = auth()->user();

    if ($user->email_verify_code == $request->code) {
        $user->email_verified_at = now();
        $user->email_verify_code = null;
        $user->save();

        return response()->json(['verified' => true]);
    }

    return response()->json(['verified' => false]);
}
 -->